# bin: main.cpp
	g++ -g -fprofile-arcs -ftest-coverage -o main $<

-fprofile-arcs: This option is used when compiling a program to be profiled with gcov. 
It tells the compiler to insert extra code to write profile information needed by gcov.

-ftest-coverage: This option works with -fprofile-arcs to generate additional code that produces 
execution counts for each line of the program, which is also used by gcov for test coverage analysis.

$<: This is an automatic variable in make that represents the first dependency of the rule, which in 
this case is main.cpp. It's used here to tell the compiler which source file to compile.

after 'make bin', main and main.gcno are generated.
The .gcno file is a "notes" file that contains information needed by gcov (the GNU coverage testing tool) to perform coverage analysis. 
It includes data about the source code structure, such as the locations of blocks and arcs of 
the program's flow graph, which gcov uses to map the coverage data back to the source code.
The main file is the executable binary file that was created as a result of compiling main.cpp.


# run: bin
	./main
after 'make run', main.gcda is generated.
The main.gcda file is a "data" file generated by running the compiled program that was built with the -fprofile-arcs and 
-ftest-coverage options enabled. This file is created when the instrumented executable (in this case, main) is executed.

# gcov: run
	gcov -b main.cpp

This is the command that make will execute when the gcov target is built. The gcov command is used to analyze code coverage data.
-b: This option tells gcov to generate branch coverage information in addition to the standard line execution counts. 
main.cpp: This is the source file for which gcov will generate the coverage report. gcov will look for a corresponding 
.gcno file and a .gcda file to create the coverage report.

main.cpp.gcov created.


# lcov: gcov
	lcov --no-markers --rc lcov_branch_coverage=1 --capture --directory . --output-file main_coverage.info

This is the command that make will execute when the lcov target is built. The lcov command is a graphical front-end 
for gcov and is used to collect coverage data and produce a more user-friendly HTML report.
--no-markers: This option tells lcov not to use marker comments in the source code to exclude data from the coverage report.
--rc lcov_branch_coverage=1: This option sets the lcov configuration (--rc) for branch coverage (lcov_branch_coverage) to 1 (enabled).
It ensures that branch coverage information is included in the report, consistent with the -b option used with gcov.
--capture: This option tells lcov to capture coverage data. It will search for .gcda and .gcno files to collect the coverage information.
--directory .: This option specifies the directory where lcov should look for the coverage data files. The . indicates the current directory.


# html: lcov
	genhtml --branch-coverage -o coverage_reports/ main_coverage.info

# json:run
	gcov main.gcda --json
	gzip -dk main.gcov.json.gz

# dump: run
	gcov-dump -l -p ./main.gcno
	gcov-dump ./main.gcda
